let email=document.querySelector("#email"),emailRegex=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;async function fetchUserToken(e){try{let t=await fetch("http://localhost:5678/api/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){let r=await t.json();localStorage.setItem("token",r.token),window.location.href="./index.html"}else document.querySelector(".form-error").classList.remove("hidden")}catch(a){console.error(a)}}document.querySelector("#email").addEventListener("change",e=>{emailRegex.test(e.target.value)?(document.querySelector("#email--error").classList.add("hidden"),email.classList.remove("input-alert")):(document.querySelector("#email--error").classList.remove("hidden"),email.classList.add("input-alert"))}),document.querySelector("#login").addEventListener("submit",e=>{e.preventDefault();fetchUserToken({email:email.value,password:document.querySelector("#password").value})});